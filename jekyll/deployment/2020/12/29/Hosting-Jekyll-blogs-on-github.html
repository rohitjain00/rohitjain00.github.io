<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/><link rel="dns-prefetch" href="https://rohitjain00.disqus.com"><meta itemprop="description" name="description" content=" "/><title> How to Host Jekyll Blogs on Github Pages Using Travis </title><link rel="stylesheet" href="/assets/css/styles.css" media="none" onload="if(media!='all')media='all'"><noscript><link rel="stylesheet" href="/assets/css/styles.css"></noscript><link rel="dns-prefetch" href="www.googletagmanager.com"><link rel="dns-prefetch" href="www.google-analytics.com"><script defer src="/assets/js/theme.js"></script><script defer src="/assets/js/script.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-114665281-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-114665281-1");</script><link type="application/atom+xml" rel="alternate" href="https://therohitjain.com/feed.xml" title="Rohit Jain"/><title>How to Host Jekyll Blogs on Github Pages Using Travis | Rohit Jain</title><meta name="generator" content="Jekyll v3.8.7"/><meta property="og:title" content="How to Host Jekyll Blogs on Github Pages Using Travis"/><meta property="og:locale" content="en_US"/><meta name="description" content="If you’re reading this blog I’m assuming that you’re already familiar with Jekyll and looking for a way to automate the process of hosting your blog online."/><meta property="og:description" content="If you’re reading this blog I’m assuming that you’re already familiar with Jekyll and looking for a way to automate the process of hosting your blog online."/><link rel="canonical" href="https://therohitjain.com/jekyll/deployment/2020/12/29/Hosting-Jekyll-blogs-on-github.html"/><meta property="og:url" content="https://therohitjain.com/jekyll/deployment/2020/12/29/Hosting-Jekyll-blogs-on-github.html"/><meta property="og:site_name" content="Rohit Jain"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2020-12-29T00:00:00+00:00"/><meta name="twitter:card" content="summary"/><meta property="twitter:title" content="How to Host Jekyll Blogs on Github Pages Using Travis"/><script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2020-12-29T00:00:00+00:00","datePublished":"2020-12-29T00:00:00+00:00","description":"If you’re reading this blog I’m assuming that you’re already familiar with Jekyll and looking for a way to automate the process of hosting your blog online.","headline":"How to Host Jekyll Blogs on Github Pages Using Travis","mainEntityOfPage":{"@type":"WebPage","@id":"https://therohitjain.com/jekyll/deployment/2020/12/29/Hosting-Jekyll-blogs-on-github.html"},"url":"https://therohitjain.com/jekyll/deployment/2020/12/29/Hosting-Jekyll-blogs-on-github.html"}</script></head><body onload="onLoad()"><select id='themeSelector' onchange="toggleTheme()" aria-label="Select theme"></select><div class="mid-section-cover"><nav><h1>Rohit Jain</h1><ul><li><a href="/"> Home </a></li><li><a href="/about/"> About </a></li><li><a href="/blog/"> Blog </a></li><li><a href="/Resume.pdf"> Resume </a></li></ul></nav><main class="sub-mid-section-cover"><h2>How to Host Jekyll Blogs on Github Pages Using Travis</h2><small></small><p>If you’re reading this blog I’m assuming that you’re already familiar with Jekyll and looking for a way to automate the process of hosting your blog online.</p><h2 id="what-are-we-going-to-do">What are we going to do?</h2><p>We’re using a third party app called <code class="highlighter-rouge">Travis CI</code> to automatically publish our blog to the <code class="highlighter-rouge">github pages</code>.</p><h4 id="travis-ci"><a href="https://travis-ci.com/">Travis CI</a></h4><p>As specified in the name ‘CI’ stands for <code class="highlighter-rouge">Continous Integration</code>. It is a hosted continous integration service used to build and test software projects. Also, it’s Free ;)</p><h4 id="github-pages"><a href="https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/about-github-pages">Github Pages</a></h4><p>GitHub Pages is a static site hosting service that takes HTML, CSS, and JavaScript files straight from a repository on GitHub, optionally runs the files through a build process, and publishes a website.</p><h2 id="how-will-the-whole-thing-work">How will the whole thing work?</h2><p>After linking the github with Travis, it will automatically determine the public repos with a <code class="highlighter-rouge">.travis.yml</code> file and executes the file. When there is a change in the repository(like a new commit), the whole build process is triggered. So everytime we make changes to our blog, travis sees the changes and builds a new version of the website.</p><p>The part of the process is to automate the pushing of the website to the github repo. For this we need a way for Travis to access and commit to the github repository. This can be done with a personal access token (<a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token">PAT</a>) on Github. We provide Travis with the PAT and now it can push back to the Git repo.</p><p><strong>So now we need to tell Travis to setup the ruby environment, build the blog and push the code back to the git repo.</strong></p><h2 id="follow-the-steps-below-to-add-automation-to-your-jekyll-blog">Follow the steps below to add automation to your Jekyll blog</h2><p><strong>1. Create an branch <code class="highlighter-rouge">site</code> and set it as defualt branch on Github. (<a href="https://docs.github.com/en/free-pro-team@latest/github/administering-a-repository/changing-the-default-branch">GH docs</a>)</strong></p><p><strong>2. Create a <code class="highlighter-rouge">.travis.yml</code> file in your root directory with the following data.</strong></p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">// travis.yml</span>
<span class="na">language</span><span class="pi">:</span> <span class="s">ruby</span>
<span class="na">rvm</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">2.6.5</span>

<span class="na">before_install</span><span class="pi">:</span>
<span class="pi">-</span> <span class="s">chmod +x scripts/build.sh</span> <span class="c1"># makes the scripts executable</span>
<span class="pi">-</span> <span class="s">chmod +x scripts/deploy.sh</span> <span class="c1"># makes the scripts executable</span>

<span class="na">script</span><span class="pi">:</span> <span class="s">scripts/build.sh</span>

<span class="c1"># branch whitelist</span>
<span class="na">branches</span><span class="pi">:</span>
  <span class="na">only</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">site</span>     <span class="c1"># test the gh-pages branch</span>

<span class="na">deploy</span><span class="pi">:</span>
  <span class="na">skip_cleanup</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">provider</span><span class="pi">:</span> <span class="s">script</span>
  <span class="na">script</span><span class="pi">:</span> <span class="s">scripts/deploy.sh</span>
  <span class="na">on</span><span class="pi">:</span>
    <span class="na">branch</span><span class="pi">:</span> <span class="s">site</span>
</code></pre></div></div><p>In the config above we did the following</p><ol><li>Setup a ruby environment.</li><li>Set the script’s permission to be executable.</li><li>Only work when pushed to the branch <code class="highlighter-rouge">site</code></li><li>At the time of deploying use a script instead of the default way to deploy and provided the script’s path.</li></ol><p><strong>3. Create a folder <code class="highlighter-rouge">scripts</code> in your root directory with the two scripts file <code class="highlighter-rouge">build.sh</code> and <code class="highlighter-rouge">deploy.sh</code></strong></p><p><strong><code class="highlighter-rouge">build.sh</code></strong></p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/bin/bash</span>

<span class="s">// build.sh</span>
<span class="s">jekyll build</span>
</code></pre></div></div><p>This script bacially just builds the jekyll blog.</p><p><strong><code class="highlighter-rouge">deploy.sh</code></strong></p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/bin/bash</span>

<span class="s">// deploy.sh</span>
<span class="s">if [[ $TRAVIS_BRANCH == 'site' ]] ; then</span>
  <span class="s">cd _site</span>
  <span class="s">git init</span>

  <span class="s">git config user.name "Travis CI"</span>
  <span class="s">git config user.email "dummy@gmail.com"</span>
  <span class="s">git add .</span>
  <span class="s">git commit -m "Deploy"</span>

  <span class="s"># We redirect any output to</span>
  <span class="s"># /dev/null to hide any sensitive credential data that might otherwise be exposed.</span>
  <span class="s">git push --force --quiet "https://${GH_TOKEN}@github.com/{GITHUB_USERNAME}/{GITHUB_REPO_NAME}.git" master:master &gt; /dev/null 2&gt;&amp;1</span>
<span class="s">else</span>
  <span class="s">echo 'Invalid branch. You can only deploy from site.'</span>
  <span class="s">exit </span><span class="m">1</span>
<span class="s">fi</span>

</code></pre></div></div><p>Replace the <code class="highlighter-rouge">GITHUB_USERNAME</code> and <code class="highlighter-rouge">GITHUB_REPO_NAME</code> with your repo’s details.</p><p>This script does the following</p><ol><li>First it checks if the branch used is <code class="highlighter-rouge">site</code>.</li><li>With the build script above the site is built in <code class="highlighter-rouge">_site</code> folder.</li><li>It initialises the <code class="highlighter-rouge">_site</code> as a git repo, sets the git configs.</li><li>It uses the <code class="highlighter-rouge">GH_TOKEN</code> env variable which we need to setup in the Travis(Step 4). See <a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token">PAT</a></li><li>To make sure that we don’t print the access token we make the output to ` /dev/null 2&gt;&amp;1`. It will bascially hide the output.</li></ol><p><strong>4. Now you need to create a new personal access token on the github</strong><a href="https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/creating-a-personal-access-token">Refer to GH docs</a></p><p><strong>5. In the Travis go to your repository and create a new enviornment variable with name <code class="highlighter-rouge">GH_TOKEN</code> and set the value to the token you just generated.</strong></p><p><strong>6. Set the gh-pages publishing branch to the master. Refer to this guide <a href="https://docs.github.com/en/free-pro-team@latest/github/working-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site">here</a></strong></p><p>At this point, if you create a new commit to your repo, it should trigger a new build on Travis and after a few minutes you should be able to view your blog online.</p><p>Let me know in the comments if you face any difficulty while following this guide.</p><div class="post-footer"><div class="post-categories"> Categories : <a href="https://therohitjain.com/categories/#Jekyll">Jekyll</a> &nbsp; <a href="https://therohitjain.com/categories/#Deployment">Deployment</a></div><div><style>#share-buttons{display:inline-block;vertical-align:middle}#share-buttons:after{content:"";display:block;clear:both}#share-buttons>div{position:relative;text-align:left;height:36px;width:32px;float:left;text-align:center}#share-buttons>div>svg{height:16px;fill:#d5d5d5;margin-top:10px}#share-buttons>div:hover{cursor:pointer}#share-buttons>div.facebook:hover>svg{fill:#3b5998}#share-buttons>div.twitter:hover>svg{fill:#55acee}#share-buttons>div.linkedin:hover>svg{fill:#0077b5}#share-buttons>div.pinterest:hover>svg{fill:#cb2027}#share-buttons>div.mail:hover>svg{fill:#7d7d7d}#share-buttons>div.instagram:hover>svg{fill:#c73b92}#share-buttons>div.facebook>svg{height:18px;margin-top:9px}#share-buttons>div.twitter>svg{height:20px;margin-top:8px}#share-buttons>div.linkedin>svg{height:19px;margin-top:7px}#share-buttons>div.pinterest>svg{height:20px;margin-top:9px}#share-buttons>div.mail>svg{height:14px;margin-top:11px}</style><span>Share on: </span><div id="share-buttons"><div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=https://therohitjain.com/jekyll/deployment/2020/12/29/Hosting-Jekyll-blogs-on-github.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div><div class="twitter" title="Share this on Twitter" onclick="window.open('http://twitter.com/home?status=https://therohitjain.com/jekyll/deployment/2020/12/29/Hosting-Jekyll-blogs-on-github.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div><div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=https://therohitjain.com/jekyll/deployment/2020/12/29/Hosting-Jekyll-blogs-on-github.html&title=&summary=&source=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div><div class="mail" title="Share this through Email" onclick="window.open('mailto:?subject=Hey Checkout this Amazing Blog I Found&body=https://therohitjain.com/jekyll/deployment/2020/12/29/Hosting-Jekyll-blogs-on-github.html');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div></div></div></div><hr><div id="disqus_thread"></div><script>var disqus_config=function(){this.page.url="https://therohitjain.com/jekyll/deployment/2020/12/29/Hosting-Jekyll-blogs-on-github.html",this.page.identifier="https://therohitjain.com/jekyll/deployment/2020/12/29/Hosting-Jekyll-blogs-on-github.html"};!function(){var t=document,e=t.createElement("script");e.src="https://rohitjain00.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></main></div></body></html>